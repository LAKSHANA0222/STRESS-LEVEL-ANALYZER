<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stress Quiz</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #a1c4fd, #de53b6, #72529e, #416e90);
      background-size: 400% 400%;
      animation: gradientMove 18s ease infinite;
      color: #fff;
      text-align: center;
      padding: 40px 20px;
    }
    h1 {
      font-size: 36px;
      margin-bottom: 20px;
    }
    .question {
      margin: 20px auto;
      text-align: left;
      max-width: 700px;
    }
    .question p {
      font-size: 18px;
      font-weight: bold;
    }
    label {
      display: block;
      margin: 6px 0;
    }
    button {
      padding: 12px 25px;
      margin-top: 30px;
      font-size: 16px;
      background: #fff;
      color: #2d0052;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
  </style>
</head>
<body>
  <h1>Stress Level Assessment</h1>
  <form id="quizForm">
    <div id="questions"></div>
    <button type="submit">Submit</button>
  </form>

  <script>
    const questions = [
      "How often do you feel overwhelmed?",
      "How well are you sleeping?",
      "Do you experience body pain?",
      "Hard to concentrate?",
      "Feel anxious without reason?",
      "How often do you experience tension or pressure in your daily life?",
      "Easily irritated?",
      "React to small delays?",
      "Skip meals or eat poorly?",
      "Feel tired during the day?",
      "Handle pressure at work/school?",
      "Feel supported by friends/family?",
      "Physical symptoms of anxiety?",
      "Relaxation/hobby time per week?",
      "Overall stress level past week?"
    ];

    const options = ["A. Never", "B. Rarely", "C. Sometimes", "D. Often"];
    const container = document.getElementById("questions");

    questions.forEach((q, idx) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<p>Q${idx + 1}. ${q}</p>` +
        options.map((a, i) =>
          `<label><input type="radio" name="q${idx}" value="${i}" required> ${a}</label>`
        ).join("");
      container.appendChild(div);
    });

    document.getElementById("quizForm").addEventListener("submit", function(e) {
      e.preventDefault();
      let score = 0;
      for (let i = 0; i < questions.length; i++) {
        const val = document.querySelector(`input[name=q${i}]:checked`).value;
        score += parseInt(val);
      }

      const name = localStorage.getItem("entry.1681885843");
      const email = localStorage.getItem("entry.159947109");

      let level = "", tips = "", songs = "";

      if (score <= 15) {
        level = "üü¢ Low Stress (0‚Äì15): You're doing great!";
        tips = `‚úÖ Keep a routine of regular sleep, physical activity, and breaks.<br>
                ‚úÖ Continue engaging in hobbies and social activities.<br>
                ‚úÖ Practice gratitude daily.<br>
                ‚ùå Don‚Äôt ignore small stress signals‚Äîprevention is key!`;
        songs = `"Weightless" ‚Äì Marconi Union<br>
                 "Better Together" ‚Äì Jack Johnson<br>
                 "Here Comes the Sun" ‚Äì The Beatles`;
      } else if (score <= 30) {
        level = "üü° Moderate Stress (16‚Äì30): You‚Äôre doing okay, but could use some relaxation.";
        tips = `‚úÖ Try 5‚Äì10 minutes of deep breathing or meditation.<br>
                ‚úÖ Take short nature walks or gentle yoga.<br>
                ‚úÖ Limit screen time before bed.<br>
                ‚ùå Don‚Äôt rely on caffeine or skip meals.`;
        songs = `"Let Her Go" ‚Äì Passenger<br>
                 "Sunflower" ‚Äì Post Malone<br>
                 "Yellow" ‚Äì Coldplay<br>
                 "Fix You" ‚Äì Coldplay`;
      } else if (score <= 45) {
        level = "üü† High Stress (31‚Äì45): You need to take control before it gets worse.";
        tips = `‚úÖ Start journaling your thoughts daily.<br>
                ‚úÖ Talk to a friend or counselor.<br>
                ‚úÖ Schedule breaks and avoid multitasking.<br>
                ‚ùå Don‚Äôt isolate yourself or overwork.`;
        songs = `"River Flows in You" ‚Äì Yiruma<br>
                 "Someone Like You" ‚Äì Adele<br>
                 "Ocean Eyes" ‚Äì Billie Eilish<br>
                 "Say You Won‚Äôt Let Go" ‚Äì James Arthur`;
      } else {
        level = "üî¥ Very High Stress (46+): It‚Äôs important to prioritize mental health now.";
        tips = `‚úÖ Seek help from a mental health professional.<br>
                ‚úÖ Practice grounding techniques.<br>
                ‚úÖ Consider a digital detox.<br>
                ‚ùå Don‚Äôt ignore this level of stress‚Äîit can impact health.`;
        songs = `"Weightless" ‚Äì Marconi Union<br>
                 "Clair de Lune" ‚Äì Debussy<br>
                 "Nocturne in E-flat Major" ‚Äì Chopin<br>
                 Lo-fi Chill playlists on YouTube`;
      }

      // Save results for result.html
      localStorage.setItem("stressResult", level);
      localStorage.setItem("stressTips", tips);
      localStorage.setItem("stressSongs", songs);

      // Send to Google Form (no changes here)
      const params = new URLSearchParams();
      params.append("entry.1681885843", name);
      params.append("entry.159947109", email);
      params.append("entry.1411718699", level);

      fetch("https://docs.google.com/forms/d/e/1FAIpQLSfVziIwFC6Uco0hebu-DvFSeYoJx5Xi5qhr7HPyAxG2TsxgwA/formResponse", {
        method: "POST",
        mode: "no-cors",
        body: params
      });

      // Redirect to result page
      window.location.href = "result.html";
    });
  </script>
</body>
</html>
